<!DOCTYPE html>
<html>
<head>

  <title></title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="../../../lib/memory_generator.js"></script>
</head>
<body>


  array <input type="text" id="array" placeholder="enter values separated by space" style = "width: 500px; height:30px; font-size:20px"> 

  <button type="button" id = "run">run</button> 

  <br><br>


  
  <input type="range" min="0" max="90" value="30" id="speed">
  
  <button type="button" id = "step_back">step back</button>
  <button type="button" id = "step_forward">step forward</button>&emsp;&emsp;
  step_by_step animation<input type="checkbox" id="step_by_step">
  
  <canvas id = "draw" width ="3000" height="2000" ></canvas>
</body>

<script src="../../../lib/drawing.js"></script>
<script src="merge_sort.js"></script>
<script type="text/javascript">




$(document).ready(function(){
 
  // sharpen blurry text

  var canvas = document.getElementById("draw");
  var size = 1500;
  canvas.style.width = size + "px"; 
  canvas.style.height = size + "px"; 
  var scale = window.devicePixelRatio;  
  canvas.width = Math.floor(size * scale); 
  canvas.height = Math.floor(size * scale); 
  
  //CSS pixels for coordinate systems 
  ctx.scale(scale, scale); 

  ctx.translate(150,50);

  var v = [21,35,12,9,4,56,3,5,10,34,21];
  var msa = new mergeSortAnimation(deep_copy(v));
  
  // msa.ani.step_by_step = false;


  $("#run").click(function() {

    let str = $("#array").val();
    let d;
    let v1 = v;
    str = str.split(/[ ,]+/);
   
    v = [];
    for (let i = 0; i < str.length; i++) {
      d = parseFloat(str[i]);
      if (!isNaN(d)) v.push(d);
    }
    

    if(v.length == 0) v = v1;


    if (v.length != 0) {
      msa = new mergeSortAnimation(deep_copy(v));
      msa.ani.step_by_step = $("#step_by_step").is(":checked");
      msa.run_animation();
    }
  })


  $("#step_forward").click(function(){
    msa.ani.reverse = false;
    REVERSE_ANIMATION = false;
    msa.ani.resume_animation();
  })

  $("#step_back").click(function() { 
    msa.ani.reverse_animation();
    msa.ani.resume_animation();
  })

  $("#speed").change(function() {
    ANIMATION_TIME = 100 - $(this).val();
  });

  $("#step_by_step").change(function() {
    msa.ani.step_by_step = $(this).is(":checked");
  })


});

</script>



</html>